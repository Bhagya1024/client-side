<!DOCTYPE html>
<html lang="zxx">
<head>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<title>jupiter : Admin</title>
<link rel="icon" href="img/logo.png" type="image/png">

<link rel="stylesheet" href="css/bootstrap1.min.css" />

<link rel="stylesheet" href="vendors/themefy_icon/themify-icons.css" />

<link rel="stylesheet" href="vendors/swiper_slider/css/swiper.min.css" />

<link rel="stylesheet" href="vendors/select2/css/select2.min.css" />

<link rel="stylesheet" href="vendors/niceselect/css/nice-select.css" />

<link rel="stylesheet" href="vendors/owl_carousel/css/owl.carousel.css" />

<link rel="stylesheet" href="vendors/gijgo/gijgo.min.css" />

<link rel="stylesheet" href="vendors/font_awesome/css/all.min.css" />
<link rel="stylesheet" href="vendors/tagsinput/tagsinput.css" />

<link rel="stylesheet" href="vendors/datatable/css/jquery.dataTables.min.css" />
<link rel="stylesheet" href="vendors/datatable/css/responsive.dataTables.min.css" />
<link rel="stylesheet" href="vendors/datatable/css/buttons.dataTables.min.css" />

<link rel="stylesheet" href="vendors/text_editor/summernote-bs4.css" />

<link rel="stylesheet" href="vendors/morris/morris.css">

<link rel="stylesheet" href="vendors/material_icon/material-icons.css" />

<link rel="stylesheet" href="css/metisMenu.css">

<link rel="stylesheet" href="css/style1.css" />
<link rel="stylesheet" href="css/colors/default.css" id="colorSkinCSS">
</head>
<body class="crm_body_bg">



<nav class="sidebar">
<div class="logo d-flex justify-content-between">
<a href="index.html"><img src="img/logo.png" alt=""></a>
<div class="sidebar_close_icon d-lg-none">
<i class="ti-close"></i>
</div>
</div>
<ul id="sidebar_menu">
<li class="mm-active">
<a class="" href="index.html" aria-expanded="false">

<img src="img/menu-icon/1.svg" alt="">
<span>Dashboard</span>
</a>

</li>
<li class="">
<a class="" href="words.html" aria-expanded="false">
<img src="img/menu-icon/2.svg" alt="">
<span >Words</span>
</a>

</li>
<li class="">
<a class="" href="tutorials.html" aria-expanded="false">
<img src="img/menu-icon/3.svg" alt="">
<span style="color: #7138F8;">Tutorials</span>
</a>

</li>

<li class="">
<a class="" href="chattopic.html" aria-expanded="false">
<img src="img/menu-icon/6.svg" alt="">
<span>Chat Topics</span>
</a>

</li>

</ul>
</nav>


<section class="main_content dashboard_part">

<div class="container-fluid g-0">
<div class="row">
<div class="col-lg-12 p-0">
<div class="header_iner d-flex justify-content-between align-items-center">
<div class="sidebar_icon d-lg-none">
<i class="ti-menu"></i>
</div>
<div class="serach_field-area">
<div class="search_inner">
<form action="#">
<div class="search_field">
<input type="text" placeholder="Search here...">
</div>
<button type="submit"> <img src="img/icon/icon_search.svg" alt=""> </button>
</form>
</div>
</div>
<div class="header_right d-flex justify-content-between align-items-center">
<div class="header_notification_warp d-flex align-items-center">

</div>
<div class="profile_info">
<img src="img/client_img.png" alt="#">
<div class="profile_info_iner">
 <p>Welcome Admin!</p>
<h5>Travor James</h5>
<div class="profile_info_details">
<a href="#">Settings <i class="ti-settings"></i></a>
<a href="#">Log Out <i class="ti-shift-left"></i></a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="main_content_iner ">
<div class="container-fluid plr_30 body_white_bg pt_30">
<div class="row justify-content-center">
<div class="col-lg-12">

    <div class="box_header ">
        <div class="main-title">
        <h3 class="mb-0">Edit Tutorial </h3>
<span id="lessonno1" style="font-size: 14px;color: gray; margin-top: 12px;"></span> 
    </div>
        </div>

        <form>
        
            <div class="mb-3">
            <label class="form-label" >Topic</label>
            <input type="text" class="form-control" id="topic1" placeholder="topic">
            </div>
            <div class="mb-3">
                <label class="form-label" >Description</label>
                <input type="text" class="form-control" id="description1" placeholder="short description">
                </div>
                <div class="mb-3">
                    <label class="form-label" >Youtube URL</label>
                    <input type="url" class="form-control" id="video1" placeholder="ex: https://www.youtube.com/watch?v=W4hTJybfU7s&t=413s" >
                    </div>

                    <button type="button" class="btn btn-primary " id="savebtn" style="width: 100%;margin-top: 24px;margin-bottom: 40px;">save</button>
            </form>


</div>
</div>
</div>

<div class="alert alert-success" role="alert" style="margin-top: 40px;display: none;" id="successmsg">
    Success ! Changes saved successfully
    </div>

    <div class="alert alert-danger" role="alert" style="margin-top: 40px;display: none;" id="errormsg">
       Error ! Changes were not saved in the database
        </div>
    
</div>



<div class="footer_part">
<div class="container-fluid">
<div class="row">
<div class="col-lg-12 col-sm-12">
<div class="footer_iner text-center">
<p>2023 Â© Jupiter - Admin panel</a></p>
</div>
</div>
</div>
</div>
</div>
</section>

<script >

    const lessonnotxt= document.querySelector('#lessonno1');
    const topicInput = document.querySelector('#topic1');
    const descriptionInput = document.querySelector('#description1');
    const videoInput = document.querySelector('#video1');
    const saveBtn = document.querySelector('#savebtn');
    const successmsg = document.querySelector('#successmsg');
    const errormsg = document.querySelector('#errormsg');

    window.onload = async function() {
        console.log('inside editpage')
         const searchParams = new URLSearchParams(window.location.search);
          const lessonno = searchParams.get('lessonno');
          console.log(lessonno)
          if (lessonno) {
            // fetch the tutorial data from the server
            fetch(`http://localhost:3000/api/gettutorial/${lessonno}`)
              .then(response => response.json())
              .then(data => {
                // populate the form fields with the tutorial data
                lessonnotxt.innerHTML = data.lessonno;
                topicInput.value = data.topic;
                descriptionInput.value = data.description;
                videoInput.value = data.video;
              })
              .catch(error => console.error(error));
          } };


          saveBtn.addEventListener('click', async () => {
            const searchParams = new URLSearchParams(window.location.search);
  const lessonNo =  searchParams.get('lessonno');
  const lessonData = {
    lessonno: lessonNo,
    topic: topicInput.value,
    description: descriptionInput.value,
    video: videoInput.value
  };

  try {
    const response = await fetch(`http://localhost:3000/api/updatetutorial/${lessonNo}`, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(lessonData)
    });

    const data = await response.json();

    if (response.ok) {
      successmsg.style.display = 'block';
    } else {
      errormsg.style.display = 'block';
    }
  } catch (error) {
    console.error(error);
  }
});
    </script>
<script src="tutorial.js"></script>

<script src="js/jquery1-3.4.1.min.js"></script>

<script src="js/popper1.min.js"></script>

<script src="js/bootstrap1.min.js"></script>

<script src="js/metisMenu.js"></script>

<script src="vendors/count_up/jquery.waypoints.min.js"></script>

<script src="vendors/chartlist/Chart.min.js"></script>

<script src="vendors/count_up/jquery.counterup.min.js"></script>

<script src="vendors/swiper_slider/js/swiper.min.js"></script>

<script src="vendors/niceselect/js/jquery.nice-select.min.js"></script>

<script src="vendors/owl_carousel/js/owl.carousel.min.js"></script>

<script src="vendors/gijgo/gijgo.min.js"></script>

<script src="vendors/datatable/js/jquery.dataTables.min.js"></script>
<script src="vendors/datatable/js/dataTables.responsive.min.js"></script>
<script src="vendors/datatable/js/dataTables.buttons.min.js"></script>
<script src="vendors/datatable/js/buttons.flash.min.js"></script>
<script src="vendors/datatable/js/jszip.min.js"></script>
<script src="vendors/datatable/js/pdfmake.min.js"></script>
<script src="vendors/datatable/js/vfs_fonts.js"></script>
<script src="vendors/datatable/js/buttons.html5.min.js"></script>
<script src="vendors/datatable/js/buttons.print.min.js"></script>
<script src="js/chart.min.js"></script>

<script src="vendors/progressbar/jquery.barfiller.js"></script>

<script src="vendors/tagsinput/tagsinput.js"></script>

<script src="vendors/text_editor/summernote-bs4.js"></script>
<script src="vendors/apex_chart/apexcharts.js"></script>

<script src="js/custom.js"></script>

<script src="js/active_chart.js"></script>
<script src="vendors/apex_chart/radial_active.js"></script>
<script src="vendors/apex_chart/stackbar.js"></script>
<script src="vendors/apex_chart/area_chart.js"></script>

<script src="vendors/apex_chart/bar_active_1.js"></script>
<script src="vendors/chartjs/chartjs_active.js"></script>

</body>
</html>